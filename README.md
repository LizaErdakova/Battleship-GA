# Battleship GA

Генетический алгоритм для игры "Морской бой" (европейская версия)

## Описание проекта

Проект реализует два генетических алгоритма для оптимизации игры "Морской бой" в европейской версии (10 кораблей с жестким запретом касания):
1. ГА для оптимальной расстановки кораблей
2. ГА для оптимальной стратегии стрельбы

### Хромосома расстановки (PlacementChromosome)
Состоит из 30 целых чисел для определения расположения кораблей (x, y, ориентация для каждого из 10 кораблей)

### Хромосома стрельбы (DecisionChromosome)
Состоит из вещественных чисел - весовых коэффициентов для признаков в стратегии принятия решений о стрельбе

### Реализованные стратегии стрельбы
- RandomStrategy - случайные выстрелы
- CheckerboardStrategy - выстрелы по шахматному паттерну
- MonteCarloStrategy - использует метод Монте-Карло для предсказания вероятных позиций кораблей
- FeatureBasedStrategy - использует взвешенные признаки для принятия решений о выстреле

## Структура проекта

```
battleship-ga/
├── src/
│   ├── main.cpp                      // Точка входа в программу
│   ├── models/                       // Модели данных
│   │   ├── board.h/cpp               // Игровое поле 10x10
│   │   ├── cell.h                    // Типы клеток поля
│   │   ├── ship.h/cpp                // Класс корабля
│   │   └── fleet.h/cpp               // Коллекция кораблей
│   ├── ga/                           // Компоненты генетического алгоритма
│   │   ├── constants.h               // Константы для ГА
│   │   ├── decision_chromosome.h/cpp // Хромосома стратегии стрельбы
│   │   ├── decision_ga.h/cpp         // ГА для оптимизации стратегии стрельбы
│   │   ├── fitness.h/cpp             // Функции оценки фитнеса
│   │   ├── placement_chromosome.h/cpp // Хромосома расстановки кораблей
│   │   ├── placement_ga.h/cpp        // ГА для оптимизации расстановок
│   │   ├── placement_generator.h/cpp // Генератор стратегий расстановки
│   │   └── placement_pool.h/cpp      // Пул расстановок для обучения
│   ├── strategies/                   // Стратегии игры
│   │   ├── strategy.h                // Базовый интерфейс стратегии
│   │   ├── random_strategy.h         // Случайная стрельба
│   │   ├── checkerboard_strategy.h   // Шахматная стратегия
│   │   ├── monte_carlo_strategy.h/cpp // Метод Монте-Карло
│   │   ├── feature_based_strategy.h/cpp // Стратегия на основе признаков
│   │   └── features.h/cpp            // Признаки для принятия решений
│   ├── simulator/                    // Симуляция игр
│   │   ├── game.h/cpp                // Симуляция одиночной игры
│   │   └── evaluator.h/cpp           // Многопоточная оценка
│   └── utils/                        // Вспомогательные классы
│       ├── rng.h/cpp                 // Генератор случайных чисел
│       ├── logger.h/cpp              // Система логирования
│       └── io.h/cpp                  // Функции ввода-вывода
├── logs/                             // Логи выполнения ГА
├── placements/                       // Сохраненные расстановки кораблей
├── CMakeLists.txt                    // Файл сборки CMake
├── Makefile                          // Makefile для сборки
└── README.md                         // Документация
```

## Требования

- C++17 совместимый компилятор (g++ 8.0+, MSVC 19.14+, Clang 5.0+)
- CMake 3.10+
- Поддержка многопоточности (для параллельной оценки фитнеса)

## Сборка проекта

### Linux/macOS

```bash
mkdir build
cd build
cmake ..
make
```

### Windows (Visual Studio)

```batch
mkdir build
cd build
cmake ..
cmake --build . --config Release
```

### Windows (MinGW)

```batch
mkdir build
cd build
cmake -G "MinGW Makefiles" ..
mingw32-make
```

## Запуск

После сборки запустите исполняемый файл:

```bash
./battleship_ga
```

### Режимы запуска

Программа поддерживает несколько режимов запуска:

| Режим | Описание | Пример использования |
|----------|----------|----------|
| Без аргументов | Интерактивное меню | `./battleship_ga` |
| --train-placement | Обучение ГА для расстановки кораблей | `./battleship_ga --train-placement <out_file> [generations]` |
| --train-shooting | Обучение стратегии стрельбы | `./battleship_ga --train-shooting [generations]` |
| --train-decision | Обучение ГА для стратегии принятия решений | `./battleship_ga --train-decision <placements_file> <out_file>` |
| --play | Игра против бота | `./battleship_ga --play <weights_file> <placements_file>` |
| --test-diversity | Тестирование разнообразия расстановок | `./battleship_ga --test-diversity` |
| --test-generator | Тестирование генератора расстановок | `./battleship_ga --test-generator` |
| --test-strategies | Расширенное тестирование стратегий | `./battleship_ga --test-strategies` |
| --save-state | Сохранение состояния ГА | `./battleship_ga --save-state <state_file>` |
| --load-state | Загрузка состояния ГА | `./battleship_ga --load-state <state_file>` |

## Параметры генетического алгоритма

### Параметры ГА для расстановки кораблей

| Параметр | Значение |
|----------|----------|
| Размер популяции | 200 |
| Число поколений | 50 |
| Размер турнира | 3 |
| Вероятность кроссовера | 0.9 |
| Вероятность мутации | 0.05 |
| Размер элиты | 2 |
| Начальный штраф λ₀ | 1.0 |
| Коэффициент штрафа α | 0.05 |
| Число игр для оценки | 10 |

### Параметры ГА для стратегии стрельбы

| Параметр | Значение |
|----------|----------|
| Размер популяции | 150 |
| Число поколений | 30 |
| Размер турнира | 3 |
| Вероятность кроссовера | 0.8 |
| Начальная вероятность мутации | 0.3 |
| Размер элиты | 3 |
| Начальное σ для мутации весов | 0.2 |
| Минимальное σ для мутации весов | 0.01 |
| Коэффициент β | 5.0 |

## Авторы

[Ваше имя] - [Контакт]
<!-- Вы можете заменить это на вашу актуальную информацию -->

## Лицензия

MIT License

Copyright (c) 2025 [Ваше имя]

Разрешается использование, копирование, изменение и распространение данного программного обеспечения с условием указания автора. 